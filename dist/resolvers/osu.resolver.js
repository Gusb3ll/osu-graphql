"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:()=>osuResolver});const _typeGraphql=require("type-graphql"),_services=require("../services/index"),_osuTypes=require("../types/osu.types");var __decorate=function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};let osuResolver=class osuResolver{getStatus(){try{return{message:"Ok"}}catch(err){return{message:"Internal server error"}}}getLoginUrl(){try{return{message:"Successful",url:_services.osuService.getLoginUrl()}}catch(err){return{message:"Internal server error"}}}async getUserToken(code,state){try{let token=await _services.osuService.getUserToken(code,state);if(!token)return{ok:!1,message:"Internal server error"};return{ok:!0,message:"Successful",access_token:token.access_token,refresh_token:token.refresh_token}}catch(err){return{ok:!1,message:"Internal server error"}}}async getUser({req}){try{let user=await _services.osuService.getUser(req.headers);if(!user)return{ok:!1,message:"Internal server error"};return{ok:!0,message:"Successful",user}}catch(err){return{ok:!1,message:"Internal server error"}}}async revokeUserToken(){try{return await _services.osuService.revokeUserToken(),{ok:!0,message:"Successful"}}catch(err){return{ok:!1,message:"Internal server error"}}}};__decorate([(0,_typeGraphql.Query)(()=>_osuTypes.getStatusResponse)],osuResolver.prototype,"getStatus",null),__decorate([(0,_typeGraphql.Query)(()=>_osuTypes.osuLoginUrlResponse)],osuResolver.prototype,"getLoginUrl",null),__decorate([(0,_typeGraphql.Query)(()=>_osuTypes.osuTokenResponse),__param(0,(0,_typeGraphql.Arg)("code",()=>String)),__param(1,(0,_typeGraphql.Arg)("state",()=>String))],osuResolver.prototype,"getUserToken",null),__decorate([(0,_typeGraphql.Query)(()=>_osuTypes.osuUserResponse),__param(0,(0,_typeGraphql.Ctx)())],osuResolver.prototype,"getUser",null),__decorate([(0,_typeGraphql.Query)(()=>_osuTypes.osuRevokeTokenResponse)],osuResolver.prototype,"revokeUserToken",null),osuResolver=__decorate([(0,_typeGraphql.Resolver)()],osuResolver)